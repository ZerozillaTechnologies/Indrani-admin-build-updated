(this["webpackJsonpdashtar-admin"]=this["webpackJsonpdashtar-admin"]||[]).push([[24],{50:function(e,t,n){"use strict";var r=n(9),s=n(59),a=n.n(s),i=n(15),c=n.n(i),u=a.a.create({baseURL:"http://192.81.213.186:5000",timeout:5e5,headers:{Accept:"application/json","Content-Type":"application/json"}});u.interceptors.request.use((function(e){var t;return c.a.get("adminInfo")&&(t=JSON.parse(c.a.get("adminInfo"))),Object(r.a)(Object(r.a)({},e),{},{headers:{authorization:t?"Bearer ".concat(t.token):null}})}));var o=function(e){return e.data},l={get:function(e,t,n){return u.get(e,t,n).then(o)},post:function(e,t,n){return u.post(e,t,n).then(o)},put:function(e,t,n){return u.put(e,t,n).then(o)},patch:function(e,t,n){return u.patch(e,t,n).then(o)},delete:function(e,t){return u.delete(e,t).then(o)}};t.a=l},521:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,r,s){var a=n(e),i=n(t),c="("===(s=s||"()")[0],u=")"===s[1];return(c?this.isAfter(a,r):!this.isBefore(a,r))&&(u?this.isBefore(i,r):!this.isAfter(i,r))||(c?this.isBefore(a,r):!this.isAfter(a,r))&&(u?this.isAfter(i,r):!this.isBefore(i,r))}}}()},522:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=n();return this.format(e)===t.format(e)}}}()},535:function(e,t,n){"use strict";var r=n(50),s={getAllOrders:function(e){return r.a.get("/api/orders",e)},getOrderByUser:function(e,t){return r.a.get("/api/orders/user/".concat(e),t)},getOrderById:function(e,t){return r.a.get("/admin/orders/".concat(e),t)},updateOrder:function(e,t,n){return r.a.put("/api/orders/".concat(e),t)},deleteOrder:function(e){return r.a.delete("/orders/".concat(e,"?admin=1"))}};t.a=s},544:function(e,t,n){"use strict";n(0);var r=n(20),s=n(1);t.a=function(e){var t=e.status;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("span",{className:"font-serif",children:["pending"===t&&Object(s.jsx)(r.Badge,{type:"warning",children:t}),"processing"===t&&Object(s.jsx)(r.Badge,{children:t}),"delivered"===t&&Object(s.jsx)(r.Badge,{type:"success",children:t}),"cancel"===t&&Object(s.jsx)(r.Badge,{type:"danger",children:t})]})})}},56:function(e,t,n){"use strict";var r=n(7),s=n(59),a=n.n(s),i=n(0),c=n(21);t.a=function(e){var t=Object(i.useState)([]||!1),n=Object(r.a)(t,2),s=n[0],u=n[1],o=Object(i.useState)(""),l=Object(r.a)(o,2),d=l[0],f=l[1],h=Object(i.useState)(!0),j=Object(r.a)(h,2),b=j[0],O=j[1],g=Object(i.useContext)(c.a),p=g.isUpdate,m=g.setIsUpdate;return Object(i.useEffect)((function(){var t=!1,n=a.a.CancelToken.source();return e({cancelToken:n.token}).then((function(e){t||(u(e),f(""),O(!1))})).catch((function(e){t||(f(e.message),a.a.isCancel(e),f(e.message),O(!1),u([]))})),m(!1),function(){t=!0,n.cancel("Cancelled in cleanup")}}),[p]),{data:s,error:d,loading:b}}},576:function(e,t,n){"use strict";var r=n(0),s=n(20),a=n(535),i=n(22),c=n(21),u=n(1);t.a=function(e){var t=e.id,n=Object(r.useContext)(c.a).setIsUpdate;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(s.Select,{onChange:function(e){return function(e,t){a.a.updateOrder(e,{status:t}).then((function(e){Object(i.c)(e.message),n(!0)})).catch((function(e){return Object(i.b)(e.message)}))}(t,e.target.value)},className:"border border-gray-50 bg-gray-50 dark:border-gray-700 h-8 rounded-md text-xs focus:border-gray-400 focus:outline-none",children:[Object(u.jsx)("option",{value:"Status",defaultValue:!0,hidden:!0,children:"Status"}),Object(u.jsx)("option",{value:"delivered",children:"Delivered"}),Object(u.jsx)("option",{value:"pending",children:"Pending"}),Object(u.jsx)("option",{value:"processing",children:"Processing"}),Object(u.jsx)("option",{value:"cancel",children:"Cancel"})]})})}},69:function(e,t,n){"use strict";n(0);var r=n(1);t.a=function(e){var t=e.children;return Object(r.jsx)("h1",{className:"my-6 text-lg font-bold text-gray-700 dark:text-gray-300",children:t})}},71:function(e,t,n){"use strict";n(0);var r=n(523),s=n.n(r),a=n(1);t.a=function(e){var t=e.loading;return Object(a.jsx)("div",{className:"text-lg text-center py-6",children:Object(a.jsx)(s.a,{color:"#34D399",loading:t,height:25,width:3,radius:3,margin:4})})}},72:function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",s="second",a="minute",i="hour",c="day",u="week",o="month",l="quarter",d="year",f="date",h="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},p={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,o),a=n-s<0,i=t.clone().add(r+(a?-1:1),o);return+(-(r+(n-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:o,y:d,w:u,d:c,D:f,h:i,m:a,s:s,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",v={};v[m]=O;var x=function(e){return e instanceof D},$=function e(t,n,r){var s;if(!t)return m;if("string"==typeof t){var a=t.toLowerCase();v[a]&&(s=a),n&&(v[a]=n,s=a);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var c=t.name;v[c]=t,s=c}return!r&&s&&(m=s),s||!r&&m},y=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new D(n)},S=p;S.l=$,S.i=x,S.w=function(e,t){return y(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var D=function(){function O(e){this.$L=$(e.locale,null,!0),this.parse(e)}var g=O.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(j);if(r){var s=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,t){var n=y(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return y(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<y(e)},g.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!S.u(t)||t,l=S.p(e),h=function(e,t){var s=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?s:s.endOf(c)},j=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},b=this.$W,O=this.$M,g=this.$D,p="set"+(this.$u?"UTC":"");switch(l){case d:return r?h(1,0):h(31,11);case o:return r?h(1,O):h(0,O+1);case u:var m=this.$locale().weekStart||0,v=(b<m?b+7:b)-m;return h(r?g-v:g+(6-v),O);case c:case f:return j(p+"Hours",0);case i:return j(p+"Minutes",1);case a:return j(p+"Seconds",2);case s:return j(p+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,u=S.p(e),l="set"+(this.$u?"UTC":""),h=(n={},n[c]=l+"Date",n[f]=l+"Date",n[o]=l+"Month",n[d]=l+"FullYear",n[i]=l+"Hours",n[a]=l+"Minutes",n[s]=l+"Seconds",n[r]=l+"Milliseconds",n)[u],j=u===c?this.$D+(t-this.$W):t;if(u===o||u===d){var b=this.clone().set(f,1);b.$d[h](j),b.init(),this.$d=b.set(f,Math.min(this.$D,b.daysInMonth())).$d}else h&&this.$d[h](j);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[S.p(e)]()},g.add=function(r,l){var f,h=this;r=Number(r);var j=S.p(l),b=function(e){var t=y(h);return S.w(t.date(t.date()+Math.round(e*r)),h)};if(j===o)return this.set(o,this.$M+r);if(j===d)return this.set(d,this.$y+r);if(j===c)return b(1);if(j===u)return b(7);var O=(f={},f[a]=t,f[i]=n,f[s]=e,f)[j]||1,g=this.$d.getTime()+r*O;return S.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),a=this.$H,i=this.$m,c=this.$M,u=n.weekdays,o=n.months,l=function(e,n,s,a){return e&&(e[n]||e(t,r))||s[n].slice(0,a)},d=function(e){return S.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},j={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:S.s(c+1,2,"0"),MMM:l(n.monthsShort,c,o,3),MMMM:l(o,c),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,u,2),ddd:l(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:S.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:S.s(i,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:s};return r.replace(b,(function(e,t){return t||j[e]||s.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,f,h){var j,b=S.p(f),O=y(r),g=(O.utcOffset()-this.utcOffset())*t,p=this-O,m=S.m(this,O);return m=(j={},j[d]=m/12,j[o]=m,j[l]=m/3,j[u]=(p-g)/6048e5,j[c]=(p-g)/864e5,j[i]=p/n,j[a]=p/t,j[s]=p/e,j)[b]||p,h?m:S.a(m)},g.daysInMonth=function(){return this.endOf(o).$D},g.$locale=function(){return v[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=$(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},O}(),w=D.prototype;return y.prototype=w,[["$ms",r],["$s",s],["$m",a],["$H",i],["$W",c],["$M",o],["$y",d],["$D",f]].forEach((function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),y.extend=function(e,t){return e.$i||(e(t,D,y),e.$i=!0),y},y.locale=$,y.isDayjs=x,y.unix=function(e){return y(1e3*e)},y.en=v[m],y.Ls=v,y.p={},y}()},75:function(e,t,n){"use strict";var r=n(7),s=n(72),a=n(521),i=n.n(a),c=n(522),u=n.n(c),o=n(0),l=n(2),d=n(22);t.a=function(e){var t=Object(o.useState)(""),n=Object(r.a)(t,2),a=n[0],c=n[1],f=Object(o.useState)(""),h=Object(r.a)(f,2),j=h[0],b=h[1],O=Object(o.useState)(""),g=Object(r.a)(O,2),p=g[0],m=g[1],v=Object(o.useState)(""),x=Object(r.a)(v,2),$=x[0],y=x[1],S=Object(o.useState)(""),D=Object(r.a)(S,2),w=D[0],C=D[1],M=Object(o.useState)(""),T=Object(r.a)(M,2),L=T[0],N=T[1],Y=Object(o.useState)(""),_=Object(r.a)(Y,2),A=_[0],B=_[1],R=Object(o.useState)([]),k=Object(r.a)(R,2),P=k[0],H=k[1],U=Object(o.useState)([]),F=Object(r.a)(U,2),I=F[0],W=F[1],J=Object(o.useState)([]),z=Object(r.a)(J,2),V=z[0],Z=z[1],E=Object(o.useState)(""),q=Object(r.a)(E,2),Q=q[0],G=q[1],K=Object(o.useState)(""),X=Object(r.a)(K,2),ee=X[0],te=X[1],ne=Object(o.useState)(""),re=Object(r.a)(ne,2),se=re[0],ae=re[1],ie=Object(o.useState)(1),ce=Object(r.a)(ie,2),ue=ce[0],oe=ce[1],le=Object(o.useState)([]),de=Object(r.a)(le,2),fe=de[0],he=de[1],je=Object(o.useState)(""),be=Object(r.a)(je,2),Oe=be[0],ge=be[1],pe=Object(o.useState)(""),me=Object(r.a)(pe,2),ve=me[0],xe=me[1],$e=Object(o.useState)(""),ye=Object(r.a)($e,2),Se=ye[0],De=ye[1],we=Object(o.useState)([]),Ce=Object(r.a)(we,1)[0],Me=Object(o.useRef)(""),Te=Object(o.useRef)(""),Le=Object(o.useRef)(""),Ne=Object(o.useRef)(""),Ye=Object(o.useRef)("");s.extend(i.a),s.extend(u.a);var _e=Object(l.h)(),Ae=Object(o.useMemo)((function(){var t=new Date;t.setDate(t.getDate()-se);var n,r=e;if(console.log(e),"/dashboard"===_e.pathname){var i=r.filter((function(e){return"pending"===e.status}));H(i);var c=r.filter((function(e){return"processing"===e.status}));W(c);var u=r.filter((function(e){return"delivered"===e.status}));Z(u);var o=r.filter((function(e){return s(e.createdAt).isToday()})).reduce((function(e,t){return e+t.total}),0);ge(o);var l=r.filter((function(e){return s(e.createdAt).isBetween((new Date).setDate((new Date).getDate()-30),new Date)})).reduce((function(e,t){return e+t.total}),0);xe(l);var d=r.reduce((function(e,t){return e+t.total}),0);De(d)}(a&&(r=r.filter((function(e){return e.parent===a}))),"Low"===j&&(r=r.sort((function(e,t){return e.price<t.price&&-1}))),"High"===j&&(r=r.sort((function(e,t){return e.price>t.price&&-1}))),p&&(r=r.filter((function(e){return e.title.toLowerCase().includes(p.toLowerCase())}))),A&&(r=r.filter((function(e){return e.type.toLowerCase().includes(A.toLowerCase())}))),ee&&(r=r.filter((function(e){return e.role===ee}))),$&&(r=r.filter((function(e){var t,n;return e.name.toLowerCase().includes($.toLowerCase())||(null===e||void 0===e||null===(t=e.phone)||void 0===t?void 0:t.toLowerCase().includes($.toLowerCase()))||(null===e||void 0===e||null===(n=e.email)||void 0===n?void 0:n.toLowerCase().includes($.toLowerCase()))}))),w&&(r=r.filter((function(e){return e.title.toLowerCase().includes(w.toLowerCase())||e.couponCode.toLowerCase().includes(w.toLowerCase())}))),Q)&&(r=null===(n=r)||void 0===n?void 0:n.filter((function(e){return e.status===Q})));return L&&(r=r.filter((function(e){return e.contact.toLowerCase().includes(L.toLowerCase())}))),se&&(r=r.filter((function(e){return s(e.createdAt).isBetween(t,new Date)}))),r}),[a,j,e,p,$,w,L,A,Q,ee,se,_e]),Be=Ae.length;Object(o.useEffect)((function(){if(Ae){console.log(Ae);var e=Ae.slice(8*(ue-1),8*ue);he(e)}}),[Ae,ue,8]);return{userRef:Te,searchRef:Me,couponRef:Le,orderRef:Ne,categoryRef:Ye,pending:P,processing:I,delivered:V,todayOrder:Oe,monthlyOrder:ve,totalOrder:Se,setFilter:c,setSortedField:b,setStatus:G,setRole:te,setTime:ae,handleChangePage:function(e){oe(e)},totalResults:Be,resultsPerPage:8,dataTable:fe,serviceData:Ae,handleSubmitUser:function(e){e.preventDefault(),y(Te.current.value)},handleSubmitForAll:function(e){e.preventDefault(),m(Me.current.value)},handleSubmitCoupon:function(e){e.preventDefault(),C(Le.current.value)},handleSubmitOrder:function(e){e.preventDefault(),N(Ne.current.value)},handleSubmitCategory:function(e){e.preventDefault(),B(Ye.current.value)},handleOnDrop:function(e){for(var t=0;t<e.length;t++)Ce.push(e[t].data)},handleUploadProducts:function(){Ce.length<1?Object(d.b)("Please upload/select csv file first!"):Object(d.c)("CRUD operation disable for demo!")}}}},960:function(e,t,n){"use strict";n.r(t);n(0);var r=n(2),s=n(20),a=n(555),i=n(56),c=n(75),u=n(535),o=n(71),l=n(69),d=n(72),f=n(544),h=n(576),j=n(1),b=function(e){var t=e.orders;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(s.TableBody,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsxs)(s.TableRow,{children:[Object(j.jsx)(s.TableCell,{children:Object(j.jsx)("span",{className:"font-semibold uppercase text-xs",children:e._id.substring(20,24)})}),Object(j.jsx)(s.TableCell,{children:Object(j.jsx)("span",{className:"text-sm",children:d(e.createdAt).format("MMM D, YYYY")})}),Object(j.jsx)(s.TableCell,{children:Object(j.jsx)("span",{className:"text-sm",children:e.address})}),Object(j.jsxs)(s.TableCell,{children:[" ",Object(j.jsx)("span",{className:"text-sm",children:e.contact})," "]}),Object(j.jsx)(s.TableCell,{children:Object(j.jsx)("span",{className:"text-sm font-semibold",children:e.paymentMethod})}),Object(j.jsxs)(s.TableCell,{children:[" ",Object(j.jsxs)("span",{className:"text-sm font-semibold",children:["$",Math.round(e.total),".00"]})," "]}),Object(j.jsx)(s.TableCell,{className:"text-center",children:Object(j.jsx)(f.a,{status:e.status})}),Object(j.jsx)(s.TableCell,{className:"text-right",children:Object(j.jsx)(h.a,{id:e._id})})]},e._id)}))})})};t.default=function(){var e=Object(r.i)().id,t=Object(i.a)((function(){return u.a.getOrderByUser(e)})),n=t.data,d=t.loading,f=t.error,h=Object(c.a)(n),O=h.handleChangePage,g=h.totalResults,p=h.resultsPerPage,m=h.dataTable;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{children:"Customer Order List"}),d&&Object(j.jsx)(o.a,{loading:d}),!f&&!d&&0===m.length&&Object(j.jsx)("div",{className:"w-full bg-white rounded-md dark:bg-gray-800",children:Object(j.jsxs)("div",{className:"p-8 text-center",children:[Object(j.jsx)("span",{className:"flex justify-center my-30 text-red-500 font-semibold text-6xl",children:Object(j.jsx)(a.a,{})}),Object(j.jsx)("h2",{className:"font-medium text-base mt-4 text-gray-600",children:"This Customer have no order Yet!"})]})}),n.length>0&&!f&&!d?Object(j.jsxs)(s.TableContainer,{className:"mb-8",children:[Object(j.jsxs)(s.Table,{children:[Object(j.jsx)(s.TableHeader,{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)(s.TableCell,{children:"Order ID"}),Object(j.jsx)(s.TableCell,{children:"Time"}),Object(j.jsx)(s.TableCell,{children:"Shipping Address"}),Object(j.jsx)(s.TableCell,{children:"Phone"}),Object(j.jsx)(s.TableCell,{children:"Method"}),Object(j.jsx)(s.TableCell,{children:"Amount"}),Object(j.jsx)(s.TableCell,{className:"text-center",children:"Status"}),Object(j.jsx)(s.TableCell,{className:"text-center",children:"Actions"})]})}),Object(j.jsx)(b,{orders:m})]}),Object(j.jsx)(s.TableFooter,{children:Object(j.jsx)(s.Pagination,{totalResults:g,resultsPerPage:p,onChange:O,label:"Table navigation"})})]}):null]})}}}]);
//# sourceMappingURL=24.d8247ddf.chunk.js.map
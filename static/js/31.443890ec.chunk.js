(this["webpackJsonpdashtar-admin"]=this["webpackJsonpdashtar-admin"]||[]).push([[31],{50:function(e,t,r){"use strict";var n=r(9),a=r(60),c=r.n(a),s=r(15),l=r.n(s),i=c.a.create({baseURL:"http://192.81.213.186:5000",timeout:5e5,headers:{Accept:"application/json","Content-Type":"application/json"}});i.interceptors.request.use((function(e){var t;return l.a.get("adminInfo")&&(t=JSON.parse(l.a.get("adminInfo"))),Object(n.a)(Object(n.a)({},e),{},{headers:{authorization:t?"Bearer ".concat(t.token):null}})}));var o=function(e){return e.data},d={get:function(e,t,r){return i.get(e,t,r).then(o)},post:function(e,t,r){return i.post(e,t,r).then(o)},put:function(e,t,r){return i.put(e,t,r).then(o)},patch:function(e,t,r){return i.patch(e,t,r).then(o)},delete:function(e,t){return i.delete(e,t).then(o)}};t.a=d},540:function(e,t,r){"use strict";var n=r(50),a={getAllOrders:function(e){return n.a.get("/api/orders",e)},getOrderByUser:function(e,t){return n.a.get("/api/orders/user/".concat(e),t)},getOrderById:function(e,t){return n.a.get("/api/orders/".concat(e),t)},updateOrder:function(e,t,r){return n.a.put("/api/orders/".concat(e),t)},deleteOrder:function(e){return n.a.delete("/api/orders/".concat(e))}};t.a=a},546:function(e,t,r){"use strict";r(0);var n=r(20),a=r(1);t.a=function(e){var t=e.status;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("span",{className:"font-serif",children:["pending"===t&&Object(a.jsx)(n.Badge,{type:"warning",children:t}),"processing"===t&&Object(a.jsx)(n.Badge,{children:t}),"delivered"===t&&Object(a.jsx)(n.Badge,{type:"success",children:t}),"cancel"===t&&Object(a.jsx)(n.Badge,{type:"danger",children:t})]})})}},59:function(e,t,r){"use strict";var n=r(7),a=r(60),c=r.n(a),s=r(0),l=r(21);t.a=function(e){var t=Object(s.useState)([]||!1),r=Object(n.a)(t,2),a=r[0],i=r[1],o=Object(s.useState)(""),d=Object(n.a)(o,2),u=d[0],b=d[1],j=Object(s.useState)(!0),O=Object(n.a)(j,2),f=O[0],g=O[1],h=Object(s.useContext)(l.a),x=h.isUpdate,p=h.setIsUpdate;return Object(s.useEffect)((function(){var t=!1,r=c.a.CancelToken.source();return e({cancelToken:r.token}).then((function(e){t||(i(e),b(""),g(!1))})).catch((function(e){t||(b(e.message),c.a.isCancel(e),b(e.message),g(!1),i([]))})),p(!1),function(){t=!0,r.cancel("Cancelled in cleanup")}}),[x]),{data:a,error:u,loading:f}}},70:function(e,t,r){"use strict";r(0);var n=r(1);t.a=function(e){var t=e.children;return Object(n.jsx)("h1",{className:"my-6 text-lg font-bold text-gray-700 dark:text-gray-300",children:t})}},71:function(e,t,r){"use strict";r(0);var n=r(523),a=r.n(n),c=r(1);t.a=function(e){var t=e.loading;return Object(c.jsx)("div",{className:"text-lg text-center py-6",children:Object(c.jsx)(a.a,{color:"#34D399",loading:t,height:25,width:3,radius:3,margin:4})})}},76:function(e,t,r){"use strict";var n=r(7),a=r(74),c=r(521),s=r.n(c),l=r(522),i=r.n(l),o=r(0),d=r(2),u=r(22);t.a=function(e){var t=Object(o.useState)(""),r=Object(n.a)(t,2),c=r[0],l=r[1],b=Object(o.useState)(""),j=Object(n.a)(b,2),O=j[0],f=j[1],g=Object(o.useState)(""),h=Object(n.a)(g,2),x=h[0],p=h[1],m=Object(o.useState)(""),v=Object(n.a)(m,2),y=v[0],C=v[1],w=Object(o.useState)(""),S=Object(n.a)(w,2),N=S[0],T=S[1],k=Object(o.useState)(""),D=Object(n.a)(k,2),L=D[0],R=D[1],P=Object(o.useState)(""),I=Object(n.a)(P,2),B=I[0],F=I[1],A=Object(o.useState)([]),U=Object(n.a)(A,2),q=U[0],M=U[1],Y=Object(o.useState)([]),J=Object(n.a)(Y,2),E=J[0],H=J[1],_=Object(o.useState)([]),z=Object(n.a)(_,2),G=z[0],K=z[1],Q=Object(o.useState)(""),V=Object(n.a)(Q,2),W=V[0],X=V[1],Z=Object(o.useState)(""),$=Object(n.a)(Z,2),ee=$[0],te=$[1],re=Object(o.useState)(""),ne=Object(n.a)(re,2),ae=ne[0],ce=ne[1],se=Object(o.useState)(1),le=Object(n.a)(se,2),ie=le[0],oe=le[1],de=Object(o.useState)([]),ue=Object(n.a)(de,2),be=ue[0],je=ue[1],Oe=Object(o.useState)(""),fe=Object(n.a)(Oe,2),ge=fe[0],he=fe[1],xe=Object(o.useState)(""),pe=Object(n.a)(xe,2),me=pe[0],ve=pe[1],ye=Object(o.useState)(""),Ce=Object(n.a)(ye,2),we=Ce[0],Se=Ce[1],Ne=Object(o.useState)([]),Te=Object(n.a)(Ne,1)[0],ke=Object(o.useRef)(""),De=Object(o.useRef)(""),Le=Object(o.useRef)(""),Re=Object(o.useRef)(""),Pe=Object(o.useRef)("");a.extend(s.a),a.extend(i.a);var Ie=Object(d.h)(),Be=Object(o.useMemo)((function(){var t=new Date;t.setDate(t.getDate()-ae);var r,n=e;if(console.log(e),"/dashboard"===Ie.pathname){var s=n.filter((function(e){return"pending"===e.status}));M(s);var l=n.filter((function(e){return"processing"===e.status}));H(l);var i=n.filter((function(e){return"delivered"===e.status}));K(i);var o=n.filter((function(e){return a(e.createdAt).isToday()})).reduce((function(e,t){return e+t.total}),0);he(o);var d=n.filter((function(e){return a(e.createdAt).isBetween((new Date).setDate((new Date).getDate()-30),new Date)})).reduce((function(e,t){return e+t.total}),0);ve(d);var u=n.reduce((function(e,t){return e+t.total}),0);Se(u)}(c&&(n=n.filter((function(e){return e.parent===c}))),"Low"===O&&(n=n.sort((function(e,t){return e.price<t.price&&-1}))),"High"===O&&(n=n.sort((function(e,t){return e.price>t.price&&-1}))),x&&(n=n.filter((function(e){return e.title.toLowerCase().includes(x.toLowerCase())}))),B&&(n=n.filter((function(e){return e.type.toLowerCase().includes(B.toLowerCase())}))),ee&&(n=n.filter((function(e){return e.role===ee}))),y&&(n=n.filter((function(e){var t,r;return e.name.toLowerCase().includes(y.toLowerCase())||(null===e||void 0===e||null===(t=e.phone)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase()))||(null===e||void 0===e||null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(y.toLowerCase()))}))),N&&(n=n.filter((function(e){return e.title.toLowerCase().includes(N.toLowerCase())||e.couponCode.toLowerCase().includes(N.toLowerCase())}))),W)&&(n=null===(r=n)||void 0===r?void 0:r.filter((function(e){return e.status===W})));return L&&(n=n.filter((function(e){return e.contact.toLowerCase().includes(L.toLowerCase())}))),ae&&(n=n.filter((function(e){return a(e.createdAt).isBetween(t,new Date)}))),n}),[c,O,e,x,y,N,L,B,W,ee,ae,Ie]),Fe=Be.length;Object(o.useEffect)((function(){if(Be){console.log(Be);var e=Be.slice(8*(ie-1),8*ie);je(e)}}),[Be,ie,8]);return{userRef:De,searchRef:ke,couponRef:Le,orderRef:Re,categoryRef:Pe,pending:q,processing:E,delivered:G,todayOrder:ge,monthlyOrder:me,totalOrder:we,setFilter:l,setSortedField:f,setStatus:X,setRole:te,setTime:ce,handleChangePage:function(e){oe(e)},totalResults:Fe,resultsPerPage:8,dataTable:be,serviceData:Be,handleSubmitUser:function(e){e.preventDefault(),C(De.current.value)},handleSubmitForAll:function(e){e.preventDefault(),p(ke.current.value)},handleSubmitCoupon:function(e){e.preventDefault(),T(Le.current.value)},handleSubmitOrder:function(e){e.preventDefault(),R(Re.current.value)},handleSubmitCategory:function(e){e.preventDefault(),F(Pe.current.value)},handleOnDrop:function(e){for(var t=0;t<e.length;t++)Te.push(e[t].data)},handleUploadProducts:function(){Te.length<1?Object(u.b)("Please upload/select csv file first!"):Object(u.c)("CRUD operation disable for demo!")}}}},949:function(e,t,r){"use strict";r.r(t);r(0),r(706);var n=r(20),a=r(582),c=r(54),s=r(59),l=r(76),i=r(540),o=r(71),d=r(1),u=function(e){var t=e.title,r=e.Icon,a=e.quantity,c=e.className;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(n.Card,{className:"flex h-full",children:Object(d.jsxs)(n.CardBody,{className:"flex items-center border border-gray-200 dark:border-gray-800 w-full rounded-lg",children:[Object(d.jsx)("div",{className:"flex items-center justify-center p-3 rounded-full h-12 w-12 text-center mr-4 text-lg ".concat(c),children:Object(d.jsx)(r,{})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"mb-1 text-sm font-medium text-gray-600 dark:text-gray-400",children:t}),Object(d.jsx)("p",{className:"text-2xl font-bold leading-none text-gray-600 dark:text-gray-200",children:a})]})]})})})},b=r(70),j=r(74),O=(r(546),function(e){var t=e.orders;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(n.TableBody,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(d.jsx)(n.TableRow,{children:Object(d.jsx)(n.TableCell,{children:Object(d.jsx)("span",{className:"text-sm",children:j(e.created_at).format("MMM D, YYYY")})})},e._id)}))})})}),f=function(e){var t=e.title,r=e.Icon,a=e.className,c=e.price;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(n.Card,{className:"flex justify-center text-center h-full",children:Object(d.jsxs)(n.CardBody,{className:"border border-gray-200 dark:border-gray-800 w-full p-6 rounded-lg ".concat(a),children:[Object(d.jsx)("div",{className:"text-center inline-block text-3xl ".concat(a),children:Object(d.jsx)(r,{})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"mb-3 text-base font-medium text-gray-50 dark:text-gray-100",children:t}),Object(d.jsxs)("p",{className:"text-3xl font-bold leading-none text-gray-50 dark:text-gray-50",children:["\u20b9 ",Math.round(c)]})]})]})})})};t.default=function(){var e=Object(s.a)(i.a.getAllOrders),t=e.data,r=e.loading,j=Object(l.a)(t),g=j.handleChangePage,h=j.totalResults,x=j.resultsPerPage,p=j.dataTable,m=j.pending,v=j.processing,y=j.delivered,C=j.todayOrder,w=j.monthlyOrder,S=j.totalOrder;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b.a,{children:"Dashboard Overview"}),Object(d.jsxs)("div",{className:"grid gap-4 mb-8 md:grid-cols-3 xl:grid-cols-3",children:[Object(d.jsx)(f,{title:"Today Order",Icon:a.d,price:C,className:"text-white dark:text-green-100 bg-teal-500"}),Object(d.jsx)(f,{title:"This Month",Icon:c.n,price:w,className:"text-white dark:text-green-100 bg-blue-500"}),Object(d.jsx)(f,{title:"Total Order",Icon:a.a,price:S,className:"text-white dark:text-green-100 bg-green-500"})]}),Object(d.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[Object(d.jsx)(u,{title:"Total Order",Icon:c.n,quantity:t.length,className:"text-orange-600 dark:text-orange-100 bg-orange-100 dark:bg-orange-500"}),Object(d.jsx)(u,{title:"Order Pending",Icon:c.k,quantity:m.length,className:"text-blue-600 dark:text-blue-100 bg-blue-100 dark:bg-blue-500"}),Object(d.jsx)(u,{title:"Order Processing",Icon:c.p,quantity:v.length,className:"text-teal-600 dark:text-teal-100 bg-teal-100 dark:bg-teal-500"}),Object(d.jsx)(u,{title:"Order Delivered",Icon:c.a,quantity:y.length,className:"text-green-600 dark:text-green-100 bg-green-100 dark:bg-green-500"})]}),Object(d.jsx)(b.a,{children:"Recent Order"}),r&&Object(d.jsx)(o.a,{loading:r}),p&&!r&&Object(d.jsxs)(n.TableContainer,{className:"mb-8",children:[Object(d.jsxs)(n.Table,{children:[Object(d.jsx)(n.TableHeader,{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)(n.TableCell,{children:"Order Time"}),Object(d.jsx)(n.TableCell,{children:"Delivery Address"}),Object(d.jsx)(n.TableCell,{children:"Details"}),Object(d.jsx)(n.TableCell,{children:"Product"}),Object(d.jsx)(n.TableCell,{children:"Payment method"}),Object(d.jsx)(n.TableCell,{children:"Order amount"}),Object(d.jsx)(n.TableCell,{children:"Status"})]})}),Object(d.jsx)(O,{orders:p})]}),Object(d.jsx)(n.TableFooter,{children:Object(d.jsx)(n.Pagination,{totalResults:h,resultsPerPage:x,onChange:g,label:"Table navigation"})})]})]})}}}]);
//# sourceMappingURL=31.443890ec.chunk.js.map
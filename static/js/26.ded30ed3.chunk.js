(this["webpackJsonpdashtar-admin"]=this["webpackJsonpdashtar-admin"]||[]).push([[26],{114:function(e,r,t){"use strict";var a=t(9),n=t(107),o=t(7),i=t(0),c=t(115),s=t.n(c),l=t(520),d=t(54),u=t(1),m="medequip-images";s.a.config.update({accessKeyId:"AKIASULQMX62W64LD7CW",secretAccessKey:"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"});var f=new s.a.S3({params:{Bucket:m},region:"ap-south-1"});r.a=function(e){var r=e.setImageUrl,t=e.imageUrl,c=Object(i.useState)(0),s=Object(o.a)(c,2),p=s[0],j=s[1];Object(i.useEffect)((function(){console.log(p)}),[p]);var b=Object(i.useState)([]),g=Object(o.a)(b,2),h=g[0],w=g[1],O=Object(l.a)({accept:"image/*",multiple:!1,maxSize:5e5,onDrop:function(e){w(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),x=O.getRootProps,v=O.getInputProps;Object(i.useEffect)((function(){console.log("uploader file has been changed",h),h&&h.forEach((function(e){var t={ACL:"public-read",Body:e,Bucket:m,Key:e.name};console.log("upload start"),f.upload(t).on("httpUploadProgress",(function(e,r){console.log(e,r),j(Math.round(e.loaded/e.total*100))})).send((function(e,t){e?console.log(e):(r((function(e){return[].concat(Object(n.a)(e),[{path:t.Location,name:t.key}])})),console.log(t))}))}))}),[h]);var y=h.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"inline-flex border-2 border-gray-100 w-24 max-h-24",src:e.preview,alt:e.name})})},e.name)}));return Object(i.useEffect)((function(){return function(){h.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[h]),Object(u.jsxs)("div",{className:"w-full text-center",children:[Object(u.jsxs)("div",Object(a.a)(Object(a.a)({className:"px-6 pt-5 pb-6 border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md cursor-pointer"},x()),{},{children:[Object(u.jsx)("input",Object(a.a)({},v())),Object(u.jsx)("span",{className:"mx-auto flex justify-center",children:Object(u.jsx)(d.q,{className:"text-3xl text-green-500"})}),Object(u.jsx)("p",{className:"text-sm mt-2",children:"Drag your image here"}),Object(u.jsx)("em",{className:"text-xs text-gray-400",children:"(Only *.jpeg and *.png images will be accepted)"})]})),Object(u.jsx)("aside",{className:"flex flex-row flex-wrap mt-4",children:(null===t||void 0===t?void 0:t.length)>0?t.map((function(e,r){return Object(u.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 dark:border-gray-600 w-24 max-h-24 p-2",src:e.path,alt:e.name},r)})):y})]})}},50:function(e,r,t){"use strict";var a=t(9),n=t(59),o=t.n(n),i=t(15),c=t.n(i),s=o.a.create({baseURL:"http://localhost:4023",timeout:5e5,headers:{Accept:"application/json","Content-Type":"application/json"}});s.interceptors.request.use((function(e){var r;return c.a.get("adminInfo")&&(r=JSON.parse(c.a.get("adminInfo"))),Object(a.a)(Object(a.a)({},e),{},{headers:{authorization:r?"Bearer ".concat(r.token):null}})}));var l=function(e){return e.data},d={get:function(e,r,t){return s.get(e,r,t).then(l)},post:function(e,r,t){return s.post(e,r,t).then(l)},put:function(e,r,t){return s.put(e,r,t).then(l)},patch:function(e,r,t){return s.patch(e,r,t).then(l)},delete:function(e,r){return s.delete(e,r).then(l)}};r.a=d},560:function(e,r,t){"use strict";var a=t(9),n=(t(0),t(20)),o=t(1);r.a=function(e){var r=e.setRole,t=e.register,i=e.name,c=e.label;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(n.Select,Object(a.a)(Object(a.a)({onChange:function(e){return r(e.target.value)},className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white",name:i},t("".concat(i),{required:"".concat(c," is required!")})),{},{children:[Object(o.jsx)("option",{value:"",defaultValue:!0,hidden:!0,children:"Staff role"}),Object(o.jsx)("option",{value:"admin",children:"Admin"}),Object(o.jsx)("option",{value:"ceo",children:"CEO"}),Object(o.jsx)("option",{value:"manager",children:"Manager"}),Object(o.jsx)("option",{value:"accountant",children:"Accountant"}),Object(o.jsx)("option",{value:"driver",children:" Driver "}),Object(o.jsx)("option",{value:"security-guard",children:"Security Guard"}),Object(o.jsx)("option",{value:"deliver-person",children:"Delivery Person"})]}))})}},594:function(e,r,t){"use strict";var a=t(24),n=t(9),o=t(7),i=t(0),c=t(532),s=t(15),l=t.n(s),d=t(2),u=t(70),m=t(10),f=t(21),p=t(22);r.a=function(e){var r=Object(i.useContext)(m.a).state.adminInfo,t=Object(i.useState)([]),s=Object(o.a)(t,2),j=s[0],b=s[1],g=Object(i.useState)({productread:!1,productwrite:!1,categoryread:!1,categorywrite:!1,customerread:!1,customerwrite:!1,orderread:!1,orderwrite:!1,cuoponread:!1,cuoponwrite:!1,staffsread:!1,staffswrite:!1,inventoryread:!1,inventorywrite:!1,enquiryread:!1,enquirywrite:!1,notificationread:!1,notificationwrite:!1}),h=Object(o.a)(g,2),w=h[0],O=h[1],x=Object(d.h)(),v=Object(i.useContext)(f.a),y=v.isDrawerOpen,N=v.closeDrawer,S=v.setIsUpdate,q=Object(c.a)(),U=q.register,k=q.handleSubmit,I=q.setValue,D=q.clearErrors,C=q.formState.errors,E=[{name:"product",read:"productread",write:"productwrite",readvalue:w.productread,writevalue:w.productwrite},{name:"category",read:"categoryread",write:"categorywrite",readvalue:w.categoryread,writevalue:w.categorywrite},{name:"customer",read:"customerread",write:"customerwrite",readvalue:w.customerread,writevalue:w.customerwrite},{name:"order",read:"orderread",write:"orderwrite",readvalue:w.orderread,writevalue:w.orderwrite},{name:"cuopon",read:"cuoponread",write:"cuoponwrite",readvalue:w.cuoponread,writevalue:w.cuoponwrite},{name:"staffs",read:"staffsread",write:"staffswrite",readvalue:w.staffsread,writevalue:w.staffswrite},{name:"inventory",read:"inventoryread",write:"inventorywrite",readvalue:w.inventoryread,writevalue:w.inventorywrite},{name:"enquiry",read:"enquiryread",write:"enquirywrite",readvalue:w.enquiryread,writevalue:w.enquirywrite},{name:"notification",read:"notificationread",write:"notificationwrite",readvalue:w.notificationread,writevalue:w.notificationwrite}];return Object(i.useEffect)((function(){if(!y)return I("fullname"),I("email"),I("password"),I("phoneno"),I("joiningDate"),I("jobrole"),b(""),D("fullname"),D("email"),D("password"),D("phoneno"),D("joiningDate"),void D("jobrole");e&&u.a.getStaffById(e,{email:r.email}).then((function(e){console.log(e),e&&(I("fullname",e.fullname),I("email",e.email),I("password",e.password),I("phoneno",e.phoneno),I("joiningDate",new Date(e.created_at)),I("jobrole",e.jobrole),b([{path:e.image,name:e.fullname}]),O({productread:e.roles.products.read,productwrite:e.roles.products.write,categoryread:e.roles.category.read,categorywrite:e.roles.category.write,customerread:e.roles.customer.read,customerwrite:e.roles.customer.write,orderread:e.roles.order.read,orderwrite:e.roles.order.write,cuoponread:e.roles.cuopon.read,cuoponwrite:e.roles.cuopon.write,staffsread:e.roles.staffs.read,staffswrite:e.roles.staffs.write,inventoryread:e.roles.inventory.read,inventorywrite:e.roles.inventory.write,enquiryread:e.roles.enquiry.read,enquirywrite:e.roles.enquiry.write,notificationread:e.roles.notification.read,notificationwrite:e.roles.notification.write}))})).catch((function(e){Object(p.b)("There is a server error!")}))}),[e,I,y,r.email]),Object(i.useEffect)((function(){if("/setting"===x.pathname||"/edit-profile"===x.pathname&&l.a.get("adminInfo")){var e=JSON.parse(l.a.get("adminInfo"));I("fullname",e.fullname),I("email",e.email),I("phoneno",e.phoneno),I("jobrole",e.role),b([{path:e.image,name:e.fullname}])}}),[]),{register:U,handleSubmit:k,onSubmit:function(r){if(j){var t={fullname:r.fullname,email:r.email,password:r.password,phoneno:r.phoneno,joiningDate:r.joiningDate,jobrole:r.jobrole,image:j[0].path,roles:{products:{read:w.productread,write:w.productwrite},category:{read:w.categoryread,write:w.categoryread},customer:{read:w.customerread,write:w.cuoponwrite},order:{read:w.orderread,write:w.orderwrite},cuopon:{read:w.cuoponread,write:w.cuoponwrite},staffs:{read:w.staffsread,write:w.staffswrite},inventory:{read:w.inventoryread,write:w.inventorywrite},enquiry:{read:w.enquiryread,write:w.enquirywrite},notification:{read:w.notificationread,write:w.notificationwrite}}};e?(console.log(t),u.a.updateStaff(e,t).then((function(e){console.log(e),S(!0),Object(p.c)("Staff Updated Successfully!"),N()})).catch((function(e){Object(p.b)(e.message)}))):u.a.registerAdmin(t).then((function(e){S(!0),Object(p.c)(e.message),N()})).catch((function(e){return Object(p.b)(e.message)}))}else Object(p.b)("Image is required!")},errors:C,setImageUrl:b,imageUrl:j,adminRoles:w,setAdminRoles:O,handleChecked:function(e){O((function(r){return Object(n.a)(Object(n.a)({},r),{},Object(a.a)({},e.target.name,e.target.checked))}))},roles:E}}},68:function(e,r){},69:function(e,r,t){"use strict";t(0);var a=t(1);r.a=function(e){var r=e.children;return Object(a.jsx)("h1",{className:"my-6 text-lg font-bold text-gray-700 dark:text-gray-300",children:r})}},70:function(e,r,t){"use strict";var a=t(50),n={registerAdmin:function(e){return a.a.post("/api/admin/register",e)},loginAdmin:function(e){return a.a.post("/api/admin/login?admin=1",e)},forgetPassword:function(e){return a.a.put("/admin/forget-password",e)},resetPassword:function(e){return a.a.put("/admin/reset-password",e)},signUpWithProvider:function(e){return a.a.post("/admin/signup",e)},addStaff:function(e){return a.a.post("/admin/add",e)},getAllStaff:function(e){return a.a.get("/admin/staffs",e)},getStaffById:function(e,r){return a.a.get("/admin/".concat(e),r)},updateStaff:function(e,r){return a.a.put("/admin/update-staffs/".concat(e),r)},deleteStaff:function(e){return a.a.delete("/admin/".concat(e))}};r.a=n},73:function(e,r,t){"use strict";t(0);var a=t(1);r.a=function(e){var r=e.errorName;return Object(a.jsx)(a.Fragment,{children:r&&Object(a.jsx)("span",{className:"text-red-400 text-sm mt-2",children:r.message})})}},74:function(e,r,t){"use strict";t(0);var a=t(20),n=t(1);r.a=function(e){var r=e.label;return Object(n.jsx)(a.Label,{className:"col-span-4 sm:col-span-2 font-medium text-sm",children:r})}},76:function(e,r,t){"use strict";var a=t(9),n=(t(0),t(20)),o=t(1);r.a=function(e){var r=e.register,t=e.defaultValue,i=e.required,c=e.name,s=e.label,l=e.type,d=e.placeholder;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(n.Input,Object(a.a)(Object(a.a)({},r("".concat(c),{required:!i&&"".concat(s," is required!")})),{},{defaultValue:t,type:l,placeholder:d,name:c,className:"border h-12 text-sm focus:outline-none block w-full bg-gray-100 dark:bg-white border-transparent focus:bg-white"}))})}},945:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t(20),o=t(73),i=t(594),c=t(74),s=t(76),l=t(10),d=t(560),u=t(69),m=t(114),f=t(1);r.default=function(){var e=Object(a.useContext)(l.a).state.adminInfo,r=Object(i.a)(e._id),t=r.register,p=r.handleSubmit,j=r.onSubmit,b=r.errors,g=r.imageUrl,h=r.setImageUrl;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(u.a,{children:"Edit Profile"}),Object(f.jsx)("div",{className:"container p-6 mx-auto bg-white  dark:bg-gray-800 dark:text-gray-200 rounded-lg",children:Object(f.jsxs)("form",{onSubmit:p(j),children:[Object(f.jsxs)("div",{className:"p-6 flex-grow scrollbar-hide w-full max-h-full",children:[Object(f.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(f.jsx)(c.a,{label:"Profile Picture"}),Object(f.jsx)("div",{className:"col-span-8 sm:col-span-4",children:Object(f.jsx)(m.a,{imageUrl:g,onChange:h})})]}),Object(f.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(f.jsx)(c.a,{label:"Name"}),Object(f.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(f.jsx)(s.a,{register:t,label:"Name",name:"name",type:"text",placeholder:"Your Name"}),Object(f.jsx)(o.a,{errorName:b.name})]})]}),Object(f.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(f.jsx)(c.a,{label:"Email"}),Object(f.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(f.jsx)(s.a,{register:t,label:"Email",name:"email",type:"text",placeholder:"Email"}),Object(f.jsx)(o.a,{errorName:b.email})]})]}),Object(f.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(f.jsx)(c.a,{label:"Contact Number"}),Object(f.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(f.jsx)(s.a,{register:t,label:"Contact Number",name:"phone",type:"text",placeholder:"Contact Number"}),Object(f.jsx)(o.a,{errorName:b.phone})]})]}),Object(f.jsxs)("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[Object(f.jsx)(c.a,{label:"Your Role"}),Object(f.jsxs)("div",{className:"col-span-8 sm:col-span-4",children:[Object(f.jsx)(d.a,{register:t,label:"Role",name:"role"}),Object(f.jsx)(o.a,{errorName:b.role})]})]})]}),Object(f.jsx)("div",{className:"flex flex-row-reverse pr-6 pb-6",children:Object(f.jsxs)(n.Button,{type:"submit",className:"h-12 px-6",children:[" ","Update Profile"]})})]})})]})}}}]);
//# sourceMappingURL=26.ded30ed3.chunk.js.map